* { margin: 0; padding: 0; box-sizing: border-box; }
body { background: #0a0a1a; color: #fff; font-family: 'Segoe UI', system-ui, sans-serif; overflow: hidden; height: 100vh; width: 100vw; user-select: none; -webkit-user-select: none; touch-action: none; }
#app { width: 100%; height: 100%; position: relative; }
.screen { position: absolute; inset: 0; display: none; justify-content: center; align-items: center; flex-direction: column; }
.screen.active { display: flex; }

/* Start Screen */
#start-screen { z-index: 10; }
#bg-canvas { position: absolute; inset: 0; width: 100%; height: 100%; }
.start-content { position: relative; z-index: 2; text-align: center; }
.title { font-size: clamp(3rem, 10vw, 6rem); font-weight: 900; letter-spacing: -2px; text-shadow: 0 0 40px rgba(93,173,226,0.5); }
.or { color: #5dade2; }
.subtitle { font-size: 1.2rem; opacity: 0.7; margin: 0.5rem 0 2rem; }
.name-inputs { display: flex; align-items: center; gap: 1rem; margin-bottom: 2rem; justify-content: center; flex-wrap: wrap; }
.name-inputs input { background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.15); border-radius: 8px; padding: 0.7rem 1rem; color: #fff; font-size: 1.1rem; width: 150px; text-align: center; outline: none; transition: border-color 0.2s; }
.name-inputs input:focus { border-color: #5dade2; }
.vs { font-weight: 700; opacity: 0.4; font-size: 1.2rem; }
#start-btn { background: linear-gradient(135deg, #2980b9, #5dade2); border: none; color: #fff; font-size: 1.3rem; font-weight: 700; padding: 1rem 3rem; border-radius: 50px; cursor: pointer; transition: transform 0.15s, box-shadow 0.15s; box-shadow: 0 4px 25px rgba(93,173,226,0.4); }
#start-btn:hover { transform: scale(1.05); box-shadow: 0 4px 35px rgba(93,173,226,0.6); }
#start-btn:active { transform: scale(0.97); }

/* Countdown */
#countdown-screen { z-index: 20; background: rgba(10,10,26,0.95); }
#countdown-num { font-size: clamp(6rem, 20vw, 12rem); font-weight: 900; color: #5dade2; text-shadow: 0 0 60px rgba(93,173,226,0.7); animation: countPulse 0.5s ease-out; }
@keyframes countPulse { 0% { transform: scale(1.5); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }

/* Game Screen */
#game-screen { z-index: 5; background: #0a0a1a; transition: background 1s; }
#danger-overlay { position: absolute; inset: 0; pointer-events: none; opacity: 0; transition: opacity 0.5s; box-shadow: inset 0 0 120px rgba(231,76,60,0.6); z-index: 1; }
#spill-flash { position: absolute; inset: 0; pointer-events: none; background: #fff; opacity: 0; z-index: 10; }
.game-header { position: absolute; top: 1rem; width: 100%; text-align: center; z-index: 2; }
.turn-counter { font-size: 1rem; opacity: 0.5; }
.game-area { display: flex; align-items: center; justify-content: center; gap: clamp(1rem, 4vw, 3rem); width: 100%; height: 100%; position: relative; z-index: 2; }
.player-indicator { display: flex; flex-direction: column; align-items: center; gap: 0.5rem; min-width: 100px; transition: opacity 0.3s; }
.player-indicator.inactive { opacity: 0.25; }
.player-indicator.active .player-name { text-shadow: 0 0 20px rgba(93,173,226,0.8); color: #5dade2; }
.player-name { font-size: clamp(1rem, 3vw, 1.5rem); font-weight: 700; transition: all 0.3s; }
.your-turn-flash { font-size: 0.8rem; font-weight: 700; color: #5dade2; opacity: 0; transition: opacity 0.3s; letter-spacing: 2px; }
.player-indicator.active .your-turn-flash { animation: flashIn 0.6s ease-out forwards; }
@keyframes flashIn { 0% { opacity: 0; transform: translateY(5px); } 50% { opacity: 1; } 100% { opacity: 0.8; transform: translateY(0); } }
.glass-container { position: relative; display: flex; flex-direction: column; align-items: center; }
#game-canvas { display: block; }
#fill-prompt { position: absolute; bottom: -2.5rem; font-size: 0.9rem; font-weight: 700; letter-spacing: 3px; color: #5dade2; opacity: 0; transition: opacity 0.3s; }
#fill-prompt.visible { opacity: 1; animation: pulse 1.5s ease-in-out infinite; }
@keyframes pulse { 0%, 100% { opacity: 0.5; } 50% { opacity: 1; } }
#water-pct { position: absolute; top: -1.5rem; font-size: 0.8rem; opacity: 0.3; }

/* End Screen */
#end-screen { z-index: 30; }
#end-canvas { position: absolute; inset: 0; width: 100%; height: 100%; }
.end-content { position: relative; z-index: 2; text-align: center; }
#end-title { font-size: clamp(3rem, 10vw, 6rem); font-weight: 900; color: #e74c3c; text-shadow: 0 0 40px rgba(231,76,60,0.5); margin-bottom: 1rem; }
#end-loser { font-size: 1.3rem; opacity: 0.8; margin-bottom: 0.3rem; }
#end-winner { font-size: 1.8rem; font-weight: 700; color: #2ecc71; margin-bottom: 1.5rem; }
#end-stats { font-size: 0.95rem; opacity: 0.5; margin-bottom: 0.5rem; }
#share-text { font-size: 0.9rem; opacity: 0.6; margin-bottom: 2rem; cursor: pointer; padding: 0.5rem; border-radius: 8px; transition: background 0.2s; }
#share-text:hover { background: rgba(255,255,255,0.05); }
.end-buttons { display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; }
@media (max-width: 600px) {
  .title { font-size: clamp(2rem, 8vw, 4rem); }
  .name-inputs { flex-direction: column; gap: 0.5rem; }
  .name-inputs input { width: 180px; }
  #start-btn { font-size: 1.1rem; padding: 0.8rem 2rem; min-height: 48px; }
  .player-indicator { min-width: 70px; }
  .player-name { font-size: clamp(0.85rem, 2.5vw, 1.2rem); }
  .game-area { gap: 0.5rem; }
  .end-buttons button { min-height: 48px; font-size: 1rem; }
  #play-again-btn { min-height: 48px; }
}
.end-buttons button { background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); color: #fff; font-size: 1.1rem; font-weight: 600; padding: 0.8rem 2rem; border-radius: 50px; cursor: pointer; transition: all 0.15s; }
.end-buttons button:hover { background: rgba(255,255,255,0.15); transform: scale(1.03); }
#play-again-btn { background: linear-gradient(135deg, #2980b9, #5dade2); border: none; }
